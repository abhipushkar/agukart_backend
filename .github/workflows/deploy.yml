- name: Deploy Backend on AWS
  run: |
    ssh -o StrictHostKeyChecking=no ubuntu@65.1.111.83 << 'EOF'
      set -e

      echo "ðŸš€ Deploying Backend on AWS..."

      node -v
      npm -v

      cd /var/www/html/backend

      git remote set-url origin git@github.com:<YOUR_ORG>/<YOUR_REPO>.git
      git fetch origin
      git checkout main
      git reset --hard origin/main

      npm install
      npm run build || true

      pm2 describe agukart-backend > /dev/null \
        && pm2 restart agukart-backend --update-env \
        || pm2 start dist/app.js --name agukart-backend --update-env

      pm2 save

      echo "âœ… Backend deployed successfully on AWS"
    EOF
